
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Beeminder API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>

    <link href="images/favicon" rel="icon" type="image/" />
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/bee_logo_110.png" class="logo" alt="Bee logo 110" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#beeminder-api-reference" class="toc-h1 toc-link" data-title="Beeminder API Reference">Beeminder API Reference</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="Beeminder API Reference">Introduction</a>
                  </li>
                  <li>
                    <a href="#preliminaries" class="toc-h2 toc-link" data-title="Beeminder API Reference">Preliminaries</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#auth" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#personal-authentication-token" class="toc-h2 toc-link" data-title="Authentication">Personal authentication token</a>
                  </li>
                  <li>
                    <a href="#client-oauth" class="toc-h2 toc-link" data-title="Authentication">Client OAuth</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#user" class="toc-h1 toc-link" data-title="User Resource">User Resource</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#attributes" class="toc-h2 toc-link" data-title="User Resource">Attributes</a>
                  </li>
                  <li>
                    <a href="#getuser" class="toc-h2 toc-link" data-title="User Resource">Get information about a user</a>
                  </li>
                  <li>
                    <a href="#redirectuser" class="toc-h2 toc-link" data-title="User Resource">Authenticate and redirect the user</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#goal" class="toc-h1 toc-link" data-title="Goal Resource">Goal Resource</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#attributes-2" class="toc-h2 toc-link" data-title="Goal Resource">Attributes</a>
                  </li>
                  <li>
                    <a href="#getgoal" class="toc-h2 toc-link" data-title="Goal Resource">Get information about a goal</a>
                  </li>
                  <li>
                    <a href="#getgoals" class="toc-h2 toc-link" data-title="Goal Resource">Get all goals for a user</a>
                  </li>
                  <li>
                    <a href="#creategoal" class="toc-h2 toc-link" data-title="Goal Resource">Create a goal for a user</a>
                  </li>
                  <li>
                    <a href="#putgoal" class="toc-h2 toc-link" data-title="Goal Resource">Update a goal for a user</a>
                  </li>
                  <li>
                    <a href="#refresh" class="toc-h2 toc-link" data-title="Goal Resource">Force a fetch of autodata and graph refresh</a>
                  </li>
                  <li>
                    <a href="#dialroad" class="toc-h2 toc-link" data-title="Goal Resource">[deprecated] Update a yellow brick road</a>
                  </li>
                  <li>
                    <a href="#shortcircuit" class="toc-h2 toc-link" data-title="Goal Resource">Short circuit a goal's pledge</a>
                  </li>
                  <li>
                    <a href="#stepdown" class="toc-h2 toc-link" data-title="Goal Resource">Step down a goal's pledge</a>
                  </li>
                  <li>
                    <a href="#cancelstepdown" class="toc-h2 toc-link" data-title="Goal Resource">Cancel a scheduled step down</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#datapoint" class="toc-h1 toc-link" data-title="Datapoint Resource">Datapoint Resource</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#attributes-3" class="toc-h2 toc-link" data-title="Datapoint Resource">Attributes</a>
                  </li>
                  <li>
                    <a href="#dataall" class="toc-h2 toc-link" data-title="Datapoint Resource">Get all the datapoints</a>
                  </li>
                  <li>
                    <a href="#postdata" class="toc-h2 toc-link" data-title="Datapoint Resource">Create a datapoint</a>
                  </li>
                  <li>
                    <a href="#postdatas" class="toc-h2 toc-link" data-title="Datapoint Resource">Create multiple datapoints</a>
                  </li>
                  <li>
                    <a href="#putdata" class="toc-h2 toc-link" data-title="Datapoint Resource">Update a datapoint</a>
                  </li>
                  <li>
                    <a href="#deletedata" class="toc-h2 toc-link" data-title="Datapoint Resource">Delete a datapoint</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#charge" class="toc-h1 toc-link" data-title="Charge Resource">Charge Resource</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#attributes-4" class="toc-h2 toc-link" data-title="Charge Resource">Attributes</a>
                  </li>
                  <li>
                    <a href="#postcharge" class="toc-h2 toc-link" data-title="Charge Resource">Create a charge</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.beeminder.com'>Beeminder</a></li>
            <li><a href='https://www.beeminder.com/apps/new'>Get an API key</a></li>
            <li><a href='https://github.com/beeminder/apidocs'>Contribute to these docs!</a></li>
            <li><a href='https://github.com/lord/slate'>Docs powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='beeminder-api-reference'>Beeminder API Reference</h1><h2 id='introduction'>Introduction</h2>
<blockquote>
<p>See 
<a href="https://github.com/beeminder" title="The Beeminder org on GitHub">github.com/beeminder</a> 
for API libraries in various languages.
Examples here are currently just Curl and Ruby so far. </p>
</blockquote>

<p>In case you&#39;re here to automate adding data to Beeminder, there&#39;s a good chance 
we&#39;ve got you covered with our 
<a href="http://beeminder.com/zapier" title="Zapier is a service like IFTTT that connects hundreds of disparate webservices. In the case of Beeminder you can create triggers in other webservices that automatically cause data to be added to Beeminder graphs.">Zapier integration</a>
or our
<a href="http://ifthisMINDthat.com" title="IFTTT = If This Then That">IFTTT integration</a>.
If you&#39;re looking for ideas for things to do with the Beeminder API, we have a
<a href="http://blog.beeminder.com/api" title="This was the blog post that originally announced our API in 2012">blog post with lots of examples</a>.
The
<a href="http://forum.beeminder.com/c/tech" title="Yay Discourse.org!">tech category of our forum</a>
is a good place to ask questions and show off what you&#39;re working on.</p>

<p>It&#39;s really important to us that this API be easy for developers to use so please don&#39;t be shy about asking us questions.
Whether you post in
<a href="http://forum.beeminder.com" title="The above link is the Tech subset of the forum; this link is to the main page for the forum">the forum</a>
or email us at <strong>support@beeminder.com</strong> we&#39;ve invariably found that questions people avoided asking for fear they were dumb turned out to point to things we needed to improve in the API or the documentation.
So lean on us heavily as you&#39;re hacking away with our API &mdash; it helps us a lot when you do!</p>
<h2 id='preliminaries'>Preliminaries</h2>
<p>The base URL for all requests is <code>https://www.beeminder.com/api/v1/</code>.</p>

<p>A common mistake is to use the wrong URL, e.g., using an <code>http</code> protocol instead of <code>https</code>, or leaving out the <code>www</code> subdomain. 
We redirect insecure and non <code>www</code> requests to the canonical Beeminder URL, but do not forward parameters for <code>POST</code> requests, so some things will break opaquely if you don&#39;t use exactly the above base URL.</p>

<p>You may also consume the Beeminder API via
<a href="https://market.mashape.com/beeminder/beeminder" title="RapidAPI (formerly Mashape) is a hub for cloud APIs (is how Wikipedia puts it)">RapidAPI</a>.</p>

<p><a href="#">Back to top</a></p>

<h1 id="auth">Authentication</h1>

<p>All API endpoints require authentication.
There are two ways to authenticate.
Both ultimately give you a token which you must then include with every API request.</p>

<aside class="notice">
Note: A common mistake is to pass the personal auth token but call the parameter
access_token, or vice-versa. 
The parameter name for your personal auth token should be `auth_token`.
</aside>
<h2 id='personal-authentication-token'>Personal authentication token</h2>
<blockquote>
<p>For example, if your username is &quot;alice&quot; and your token is &quot;abc123&quot; you can 
query information about your &quot;weight&quot; goal like so:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice/goals/weight.json?auth_token<span class="o">=</span>abc123
</code></pre>
<p>This authentication pattern is for making API calls just to your own Beeminder account.</p>

<p>After you
<a href="https://www.beeminder.com/users/sign_in">log in to Beeminder</a>,
visit
<a href="https://www.beeminder.com/api/v1/auth_token.json"><code>https://www.beeminder.com/api/v1/auth_token.json</code></a>
to get your personal auth token.
Append it to API requests you make as an additional GET or POST parameter.</p>
<h2 id='client-oauth'>Client OAuth</h2>
<p>This authentication pattern is for clients (applications) accessing the Beeminder API on a user&#39;s behalf.
Beeminder implements the
<a href="http://oauth.net/" title="Specifically Oauth2">OAuth</a>
provider protocol to allow access reasonably securely.</p>

<p>There are four steps to build a client:</p>

<h3 id="registerapp">1. Register your app</h3>

<p>Register your app at
<a href="https://www.beeminder.com/apps/new">beeminder.com/apps/new</a>.
Application name and redirect URL are required.
The redirect URL is where the user is sent after authorizing your app.</p>

<h3 id="authurl">2. Send your users to the Beeminder authorization URL</h3>

<blockquote>
<p>Example authorization URL:</p>
</blockquote>
<pre class="highlight plaintext"><code>  https://www.beeminder.com/apps/authorize?\
   client_id=xyz456&amp;redirect_uri=http&amp;#58;//foo.com/auth_callback\
   &amp;response_type=token
</code></pre>
<p>The base URL is the same for all apps:
<code>https://www.beeminder.com/apps/authorize</code>.
You&#39;ll need to add the following parameters:</p>

<ul>
<li><code>client_id</code>: Your application&#39;s client ID.
You can see a list of your registered apps and retrieve their <code>client_id</code>s at
<a href="https://www.beeminder.com/apps" title="List of apps you've registered, not to be confused with the list of apps you've authorized to access your Beeminder account, or the list of services you've authorized Beeminder to access">beeminder.com/apps</a>.</li>
<li><code>redirect_uri</code>: This is where Beeminder will send the user after they have authorized your app.
This <em>must match</em> the redirect URL you supplied when you registered your app above.
Make sure to
<a href="http://en.wikipedia.org/wiki/Percent-encoding" title="Where you replace characters that have special meaning in URLs with a percent sign and their ascii number (or plus signs for spaces)">url-encode</a>
this if it contains any special characters like question marks or ampersands.</li>
<li><code>response_type</code>: Currently this should just always be set to the value &quot;<code>token</code>&quot;.</li>
</ul>

<h3 id="storetoken">3. Receive and store user's access token</h3>

<blockquote>
<p>For example, if the user &quot;alice&quot; has access token &quot;abc123&quot; then the following string would be appended to the URL when the user is redirected there:</p>
</blockquote>
<pre class="highlight plaintext"><code>  ?access_token=abc123&amp;username=alice
</code></pre>
<p>After the user authorizes your application they&#39;ll be redirected to the <code>redirect_uri</code> that you specified, with two additional parameters,
<code>access_token</code> and
<code>username</code>, in the
<a href="http://en.wikipedia.org/wiki/Query_string" title="The query string is the parameters that come after the question mark in a URL">query string</a>.</p>

<p>You should set up your server to handle this GET request and have it remember each user&#39;s access token.
The access token uniquely identifies the user&#39;s authorization for your app.</p>

<p>The username is provided here for convenenience.
You can retrieve the username for a given access token at any time by sending a GET request for <code>/api/v1/me.json</code> with the token appended as a parameter.</p>

<h3 id="tokenparam">4. Include access token as a parameter</h3>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/me.json?access_token<span class="o">=</span>abc123
</code></pre>
<p>Append the access token as a parameter on any API requests you make on behalf of that user.
For example, your first request will probably be to get information about the
<a href="#user">User</a>
who just authorized your app.</p>

<p>You can literally use &quot;me&quot; in place of the username for any endpoint and it will be macro-expanded to the username of the authorized user.</p>

<h3 id="deauth">5. Optional: De-authorization callback</h3>

<p>If you provide a Post De-Authorization Callback URL when you register your client, we will make a POST to your endpoint when a user removes your app. The POST will include a single parameter, <code>access_token</code> in the body of the request. The value of this parameter will be the token that was de-authorized.</p>

<h3 id="autofetch">6. Optional: Autofetch callback</h3>

<p>The autofetch callback URL is also optional.
We will POST to this URL if provided, including the parameters <code>username</code> and <code>slug</code> in the body of the request when the user wants new data from you.
E.g., when the user pushes the manual refresh button, or prior to sending alerts to the user, and before derailing the goal at the end of a beemergency day.</p>

<p><a href="#">Back to top</a></p>

<h1 id="user">User Resource</h1>

<p>A User object (&quot;object&quot; in the
<a href="http://json.org" title="JavaScript Objection Notation aka how data is passed around on the internet">JSON</a>
sense) includes information about a user, like their list of goals.</p>
<h3 id='attributes'>Attributes</h3>
<ul>
<li><code>username</code> (string)</li>
<li><code>timezone</code> (string)</li>
<li><code>updated_at</code> (number):
<a href="http://en.wikipedia.org/wiki/Unix_time" title="Number of seconds since 1970-01-01 at midnight GMT">Unix timestamp</a>
(in seconds) of the last update to this user or any of their goals or datapoints.</li>
<li><code>goals</code> (array):
A list of slugs for each of the user&#39;s goals, or an array of goal hashes (objects) if <code>diff_since</code> or <code>associations</code> is sent.</li>
<li><code>deadbeat</code> (boolean):
True if the user&#39;s payment info is out of date, or an attempted payment has failed.</li>
<li><code>urgency_load</code> (number):
The idea of Urgency Load is to construct a single number that captures how edge-skatey you are across all your goals. A lower number means fewer urgently due goals. A score of 0 means that you have &gt;= 7 days of buffer on all of your active goals.</li>
<li><code>deleted_goals</code> (array):
An array of hashes, each with one key/value pair for the id of the deleted goal.
Only returned if <code>diff_since</code> is sent.</li>
</ul>

<h2 id="getuser">Get information about a user</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice.json?auth_token<span class="o">=</span>abc123

  <span class="o">{</span> <span class="s2">"username"</span>: <span class="s2">"alice"</span>,
    <span class="s2">"timezone"</span>: <span class="s2">"America/Los_Angeles"</span>,
    <span class="s2">"updated_at"</span>: 1343449880,                       
    <span class="s2">"goals"</span>: <span class="o">[</span><span class="s2">"gmailzero"</span>, <span class="s2">"weight"</span><span class="o">]</span> <span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code>  <span class="nb">require</span> <span class="s1">'beeminder'</span>

  <span class="n">bee</span> <span class="o">=</span> <span class="no">Beeminder</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">new</span> <span class="s2">"yourtoken"</span>
  <span class="n">bee</span><span class="p">.</span><span class="nf">info</span>
</code></pre><pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice.json?diff_since<span class="o">=</span>1352561989&amp;auth_token<span class="o">=</span>abc123
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343449880</span><span class="p">,</span><span class="w">                       
    </span><span class="s2">"goals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weight"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">,</span><span class="w">
               </span><span class="s2">"datapoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1325523600</span><span class="p">,</span><span class="w">    
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.45</span><span class="p">,</span><span class="w">            
                    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah blah"</span><span class="p">,</span><span class="w">     
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4f9dd9fd86f22478d3"</span><span class="p">},</span><span class="w">
                   </span><span class="p">{</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1325610000</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.85</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah blah"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f9d79fd86f33468d4"</span><span class="p">}],</span><span class="w">
               </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Weight Loss"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">},</span><span class="w">
               </span><span class="p">{</span><span class="w"> </span><span class="err">another</span><span class="w"> </span><span class="err">goal</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"deleted_goals"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"519279fd86f33468ne"</span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>.json</code></p>

<p>Retrieves information and a list of goalnames for the user with username <em>u</em>.</p>

<p>Since appending an <code>access_token</code> to the request uniquely identifies a user, you can alternatively make the request to /users/me.json (without the username).</p>
<h3 id='parameters'>Parameters</h3>
<ul>
<li><p>[<code>associations</code>] (boolean): Convenience method to fetch all information about a user. Please use sparingly and see also the <code>diff_since</code> parameter.
Default: false<br>
Send <code>true</code> if you want to receive all of the user&#39;s goal and datapoints as attributes of the user object.</p></li>
<li><p>[<code>diff_since</code>] (number): Unix timestamp in seconds.
Default: null, which will return all goals and datapoints<br>
Send a Unix timestamp to receive a filtered list of the user&#39;s goals and datapoints.
Only goals and datapoints that have been created or updated since the timestamp will be returned.
Sending <code>diff_since</code> implies that you want the user&#39;s associations, so you don&#39;t need to send both.</p></li>
<li><p>[<code>skinny</code>] (boolean): Convenience method to only get a subset of goal attributes and the most recent datapoint for the goal.
Default: false, which will return all goal attributes and all datapoints created or updated since <code>diff_since</code>.<br>
<code>skinny</code> must be sent along with <code>diff_since</code>.
If <code>diff_since</code> is not present, <code>skinny</code> is ignored.
Some goal attributes, as well as fetching all datapoints, can take some additional time to compute on the server side, so you can send <code>skinny</code> if you only need the latest datapoint and the following subset of attributes:
<code>slug,
title,
description,
goalval,
rate,
goaldate,
svg_url,
graph_url,
thumb_url,
goal_type,
autodata,
losedate,
deadline,
leadtime,
alertstart,
id,
queued,
updated_at,
burner,
yaw,
lane,
lanewidth,
delta,
runits,
limsum,
frozen,
lost,
won,
contract,
delta_text,
safebump,
gunits,
todayta,
hhmmformat
</code>
Instead of a <code>datapoints</code> attribute, sending <code>skinny</code> will replace that attribute with a <code>last_datapoint</code> attribute. Its value is a Datapoint hash.</p></li>
<li><p>[<code>datapoints_count</code>] (number): number of datapoints.
Default: null, which will return all goals and datapoints.
Send a number <code>n</code> to only recieve the <code>n</code> most recently added datapoints, sorted by <code>updated_at</code>.
Note that the most recently added datapoint could have been a datapoint whose timestamp is well in the past and therefore before other datapoints in that respect.
For example, my datapoints might look like:<br>
<br>
12 1<br>
14 1<br>
15 1<br>
16 1<br>
<br>
If I go back and realize that I forgot to enter data on the 13th, the datapoint for the 13th will be sorted ahead of the one on the 16th:<br>
<br>
12 1<br>
14 1<br>
15 1<br>
16 1<br>
13 1  </p></li>
</ul>
<h3 id='returns'>Returns</h3>
<p>A <a href="#user">User</a> object.</p>

<p>Use the <code>updated_at</code> field to be a good Beeminder API citizen and avoid unnecessary requests for goals and datapoints.
Any updates to a user, their goals, or any datapoints on any of their goals will cause this field to be updated to the current unix timestamp.
If you store the returned value and, on your next call to this endpoint, the value is the same, there&#39;s no need to make requests to other endpoints.</p>

<p>Checking the timestamp is an order of magnitude faster than retrieving all the data, so it&#39;s definitely wise to use this approach.</p>

<h2 id="redirectuser">Authenticate and redirect the user</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice.json?auth_token<span class="o">=</span>abc123&amp;redirect_to_url<span class="o">=</span>https%3A%2F%2Fwww.beeminder.com%2Fpledges
</code></pre><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>.json</code></p>

<p>Attempts to authenticate the user and if successful redirects to the given URL.
Allows third-party apps to send the user to a specific part of the website without getting intercepted by a login screen, for doing things not available through the API.</p>
<h3 id='parameters-2'>Parameters</h3>
<ul>
<li>[<code>redirect_to_url</code>] (string): Url to redirect the user to.</li>
</ul>

<p><a href="#">Back to top</a></p>

<h1 id="goal">Goal Resource</h1>

<p>A Goal object includes everything about a specific goal for a specific user, including the target value and date, the steepness of the yellow brick road, the graph image, and various settings for the goal.</p>
<h3 id='attributes-2'>Attributes</h3>
<ul>
<li><code>slug</code> (string): The final part of the URL of the goal, used as an identifier. E.g., if user &quot;alice&quot; has a goal at beeminder.com/alice/weight then the goal&#39;s slug is &quot;weight&quot;.</li>
<li><code>updated_at</code> (number): <a href="http://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a> of the last time this goal was updated.</li>
<li><code>title</code> (string): The title that the user specified for the goal. E.g., &quot;Weight Loss&quot;.</li>
<li><code>fineprint</code> (string): The user-provided description of what exactly they are committing to.</li>
<li><code>yaxis</code> (string): The label for the y-axis of the graph. E.g., &quot;Cumulative total hours&quot;.</li>
<li><code>goaldate</code> (number): Unix timestamp (in seconds) of the goal date.</li>
<li><code>goalval</code> (number): Goal value &mdash; the number the yellow brick road will eventually reach. E.g., 70 kilograms.</li>
<li><code>rate</code> (number): The slope of the (final section of the) yellow brick road. You must also consider <code>runits</code> to fully specify the rate.</li>
<li><code>runits</code> (string): Rate units. One of <code>y</code>, <code>m</code>, <code>w</code>, <code>d</code>, <code>h</code> indicating that the rate of the yellow brick road is yearly, monthly, weekly, daily, or hourly.</li>
<li><code>svg_url</code> (string): URL for the goal&#39;s graph svg. E.g., &quot;http://static.beeminder.com/alice/weight.svg&quot;.</li>
<li><code>graph_url</code> (string): URL for the goal&#39;s graph image. E.g., &quot;http://static.beeminder.com/alice/weight.png&quot;.</li>
<li><code>thumb_url</code> (string): URL for the goal&#39;s graph thumbnail image. E.g., &quot;http://static.beeminder.com/alice/weight-thumb.png&quot;.</li>
<li><code>autodata</code> (string): The name of automatic data source, if this goal has one. Will be null for manual goals.</li>
<li><code>goal_type</code> (string): One of the following symbols:

<ul>
<li><code>hustler</code>: Do More</li>
<li><code>biker</code>: Odometer</li>
<li><code>fatloser</code>: Weight loss</li>
<li><code>gainer</code>: Gain Weight</li>
<li><code>inboxer</code>: Inbox Fewer</li>
<li><code>drinker</code>: Do Less</li>
<li><code>custom</code>: Full access to the underlying goal parameters</li>
</ul></li>
<li><code>losedate</code> (number): Unix timestamp of derailment. When you&#39;ll be off the road if nothing is reported.</li>
<li><code>queued</code> (boolean): Whether the graph is currently being updated to reflect new data.</li>
<li><code>secret</code> (boolean): Whether you have to be logged in as owner of the goal to view it. Default: <code>false</code>.</li>
<li><code>datapublic</code> (boolean): Whether you have to be logged in as the owner of the goal to view the datapoints. Default: <code>false</code>.</li>
<li><code>datapoints</code> (array of <a href="#datapoint">Datapoints</a>): The datapoints for this goal.</li>
<li><code>numpts</code> (number): Number of datapoints.</li>
<li><code>pledge</code> (number): Amount pledged (USD) on the goal.</li>
<li><code>initday</code> (number): Unix timestamp (in seconds) of the start of the yellow brick road.</li>
<li><code>initval</code> (number): The y-value of the start of the yellow brick road.</li>
<li><code>curday</code> (number): Unix timestamp (in seconds) of the end of the yellow brick road, i.e., the most recent (inferred) datapoint.</li>
<li><code>curval</code> (number): The value of the most recent datapoint.</li>
<li><code>lastday</code> (number): Unix timestamp (in seconds) of the last (explicitly entered) datapoint.</li>
<li><code>yaw</code> (number): Good side of the road. I.e., the side of the road (+1/-1 = above/below) that makes you say &quot;yay&quot;.</li>
<li><code>dir</code> (number): Direction the road is sloping, usually the same as yaw.</li>
<li><code>lane</code> (number): Where you are with respect to the yellow brick road (2 or more = above the road, 1 = top lane, -1 = bottom lane, -2 or less = below the road).</li>
<li><code>mathishard</code> (array of 3 numbers): The goaldate, goalval, and rate &mdash; all filled in. (The road dial specifies 2 out of 3 and you can check this if you want Beeminder to do the math for you on inferring the third one.)</li>
<li><code>headsum</code> (string): Summary of where you are with respect to the yellow brick road, e.g., &quot;Right on track in the top lane&quot;.</li>
<li><code>limsum</code> (string): Summary of what you need to do to eke by, e.g., &quot;+2 within 1 day&quot;.</li>
<li><code>kyoom</code> (boolean): Cumulative; plot values as the sum of all those entered so far, aka auto-summing.</li>
<li><code>odom</code> (boolean): Treat zeros as accidental odometer resets.</li>
<li><code>aggday</code> (string): How to aggregate points on the same day, eg, min/max/mean.</li>
<li><code>steppy</code> (boolean): Join dots with purple steppy-style line.</li>
<li><code>rosy</code> (boolean): Show the rose-colored dots and connecting line.</li>
<li><code>movingav</code> (boolean): Show moving average line superimposed on the data.</li>
<li><code>aura</code> (boolean): Show turquoise swath, aka blue-green aura.</li>
<li><code>frozen</code> (boolean): Whether the goal is currently frozen and therefore must be restarted before continuing to accept data.</li>
<li><code>won</code> (boolean): Whether the goal has been successfully completed.</li>
<li><code>lost</code> (boolean): Whether the goal is currently off track.</li>
<li><code>nomercy</code> (boolean): Whether to recommit without the usual week of safety buffer, should you derail.</li>
<li><code>contract</code> (dictionary): Dictionary with two attributes. <code>amount</code> is the amount at risk on the contract, and <code>stepdown_at</code> is a Unix timestamp of when the contract is scheduled to revert to the next lowest pledge amount. <code>null</code> indicates that it is not scheduled to revert.</li>
<li><code>road</code> (array): Array of tuples that can be used to construct the Yellow Brick Road. This field is also known as the road matrix. Each tuple specifies 2 out of 3 of [<code>time</code>, <code>goal</code>, <code>rate</code>]. To construct the road, start with a known starting point (time, value) and then each row of the road matrix specifies 2 out of 3 of {t,v,r} which gives the segment ending at time t. You can walk forward filling in the missing 1-out-of-3 from the (time, value) in the previous row.</li>
<li><code>roadall</code> (array): Like <code>road</code> but with an additional initial row consisting of [<code>initday</code>, <code>initval</code>, null] and an additional final row consisting of [<code>goaldate</code>, <code>goalval</code>, <code>rate</code>].</li>
<li><code>fullroad</code> (array): Like <code>roadall</code> but with the nulls filled in.</li>
<li><code>rah</code> (number): Road value (y-value of the centerline of the yellow brick road) at the akrasia horizon (today plus one week).</li>
<li><code>delta</code> (number): Distance from the centerline of the yellow brick road to today&#39;s datapoint (<code>curval</code>).</li>
<li><code>delta_text</code> (string): The text that describes how far the goal is from each lane of the road &mdash; orange, blue, green. If the goal is on the good side of a given lane, the &quot;?&quot; character will appear.</li>
<li><code>safebump</code> (number): The absolute y-axis number you need to reach to get one additional day of safety buffer.</li>
<li><code>id</code> (string of hex digits): We prefer using user/slug as the goal identifier, however, since we began allowing users to change slugs, this id is useful!</li>
<li><code>callback_url</code> (string): Callback URL, as
<a href="http://forum.beeminder.com/t/webhook-callback-documentation/313" title="In short: you can add a callback to your own server whenever data is added on Beeminder">discussed in the forum</a>.
WARNING: If different apps change this they&#39;ll step on each other&#39;s toes.</li>
<li><code>description</code> (string): Deprecated. User-supplied description of goal (listed in sidebar of graph page as &quot;Goal Statement&quot;).</li>
<li><code>graphsum</code> (string): Deprecated. Text summary of the graph, not used in the web UI anymore.</li>
<li><code>lanewidth</code> (number): Width of the lanes on either side of the centerline of the yellow brick road, i.e., half the road width.</li>
<li><code>deadline</code> (number): Seconds by which your deadline differs from midnight. Negative is before midnight, positive is after midnight.
Allowed range is -17*3600 to 6*3600 (7am to 6am).</li>
<li><code>leadtime</code> (number): Days before derailing we start sending you reminders. Zero means we start sending them on the beemergency day, when you will derail later that day.</li>
<li><code>alertstart</code> (number): Seconds after midnight that we start sending you reminders (on the day that you&#39;re scheduled to start getting them, see <code>leadtime</code> above).</li>
<li><code>plotall</code> (boolean): Whether to plot all the datapoints, or only the <code>aggday</code>&#39;d one. So if false then only the official datapoint that&#39;s counted is plotted.</li>
<li><code>last_datapoint</code> (<a href="#datapoint">Datapoint</a>): The last datapoint entered for this goal.</li>
<li><code>integery</code> (boolean): Assume that the units must be integer values.  Used for things like <code>limsum</code>.</li>
<li><code>gunits</code> (string): Goal units, like &quot;hours&quot; or &quot;pushups&quot; or &quot;pages&quot;.</li>
<li><code>hhmmformat</code> (boolean): Whether to show data in a &quot;timey&quot; way, with colons.  For example, this would make a 1.5 show up as 1:30.</li>
<li><code>todayta</code> (boolean): Whether there are any datapoints for today</li>
</ul>

<p>The goal types are shorthand for a collection of settings of more fundamental goal attributes.
Note that changing the goal type of an already-created goal has no effect on those fundamental goal attributes.
The following table lists what those attributes are.</p>

<table><thead>
<tr>
<th>parameter</th>
<th><code>hustler</code></th>
<th><code>biker</code></th>
<th><code>fatloser</code></th>
<th><code>gainer</code></th>
<th><code>inboxer</code></th>
<th><code>drinker</code></th>
</tr>
</thead><tbody>
<tr>
<td><code>yaw</code></td>
<td>1</td>
<td>1</td>
<td>-1</td>
<td>1</td>
<td>-1</td>
<td>-1</td>
</tr>
<tr>
<td><code>dir</code></td>
<td>1</td>
<td>1</td>
<td>-1</td>
<td>1</td>
<td>-1</td>
<td>1</td>
</tr>
<tr>
<td><code>kyoom</code></td>
<td>true</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td><code>odom</code></td>
<td>false</td>
<td>true</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>edgy</code></td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td><code>aggday</code></td>
<td>&quot;sum&quot;</td>
<td>&quot;last&quot;</td>
<td>&quot;min&quot;</td>
<td>&quot;max&quot;</td>
<td>&quot;min&quot;</td>
<td>&quot;sum&quot;</td>
</tr>
<tr>
<td><code>steppy</code></td>
<td>true</td>
<td>true</td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>true</td>
</tr>
<tr>
<td><code>rosy</code></td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>movingav</code></td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>aura</code></td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
</tbody></table>

<p>There are four broad, theoretical categories &mdash; called the platonic goal types &mdash; that goals fall into, defined by <code>dir</code> and <code>yaw</code>:</p>

<p><code>MOAR = dir +1 &amp; yaw +1</code>: &quot;go up, like work out more&quot;<br>
<code>PHAT = dir -1 &amp; yaw -1</code>: &quot;go down, like weightloss or gmailzero&quot;<br>
<code>WEEN = dir +1 &amp; yaw -1</code>: &quot;go up less, like quit smoking&quot;<br>
<code>RASH = dir -1 &amp; yaw +1</code>: &quot;go down less, ie, rationing, <a href="http://beeminder.com/d/contacts" title="The Beeminder CEO with an early Beeminder graph to ration his supply of 'daily' contact lenses to last for 2 years, till 2013">for example</a>&quot;</p>

<p>The <code>dir</code> parameter, for which direction the road is expected to go, is mostly just for the above categorization, but is used specifically in the following ways:</p>

<ol>
<li>Where to draw the watermarks (amount pledged and number of safe days)</li>
<li>How to phrase things like &quot;bare min of +123 in 4 days&quot; and the status line (also used in bot email subjects)</li>
<li>Which direction is the optimistic one for the rosy dots algorithm</li>
</ol>

<aside class="notice">
Clearing up confusion about WEEN and RASH goal types: Beeminder generally plots the cumulative total of your metric, such as total cigarettes smoked. So even a quit-smoking goal will slope up (dir&gt;0). Just that it will slope up less and less steeply as you wean yourself. When you actually quit, the slope will be zero. That's why "WEEN" goals are sloping up but good side is down. The opposite case &mdash; sloping down but good side's up &mdash; is called "RASH" and is rarely used. It's for beeminding a number that you want to go down slowly. Maybe cigarettes remaining in a carton that you want to be your last, or bottles of fresh water remaining post-apocalypse &mdash; someday this goal type will be useful!
</aside>

<p>If you just want the dot color, here&#39;s how to infer it from <code>lane</code> and <code>yaw</code>:</p>

<ul>
<li><code>lane*yaw &gt;= -1</code>: on the road or on the good side of it (blue or green)</li>
<li><code>lane*yaw &gt;   1</code>: good side of the road (green dot)</li>
<li><code>lane*yaw ==  1</code>: right lane (blue dot)</li>
<li><code>lane*yaw == -1</code>: wrong lane (orange dot)</li>
<li><code>lane*yaw &lt;= -2</code>: emergency day or derailed (red dot)</li>
</ul>

<p>Finally, the way to tell if a goal has finished successfully is <code>now &gt;= goaldate &amp;&amp; goaldate &lt; losedate</code>.
That is, you win if you hit the goal date before hitting <code>losedate</code>.
You don&#39;t have to actually reach the goal value &mdash; staying on the yellow brick road till the end suffices.</p>

<h2 id="getgoal">Get information about a goal</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice/goals/weight.json?auth_token<span class="o">=</span>abc123&amp;datapoints<span class="o">=</span><span class="nb">true</span>
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weight"</span><span class="p">,</span><span class="w">               
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Weight Loss"</span><span class="p">,</span><span class="w">         
    </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1358524800</span><span class="p">,</span><span class="w">         
    </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="mi">166</span><span class="p">,</span><span class="w">                 
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">                   
    </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w">   </span><span class="s2">"http://static.beeminder.com/alice+weight.svg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight-thumb.png"</span><span class="p">,</span><span class="w">    
    </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fatloser"</span><span class="p">,</span><span class="w">            
    </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1358524800</span><span class="p">,</span><span class="w">        
    </span><span class="s2">"queued"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">                
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337479214</span><span class="p">,</span><span class="w">       
    </span><span class="s2">"datapoints"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1325523600</span><span class="p">,</span><span class="w">    
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.45</span><span class="p">,</span><span class="w">            
                    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah blah"</span><span class="p">,</span><span class="w">     
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4f9dd9fd86f22478d3"</span><span class="p">},</span><span class="w">
                   </span><span class="p">{</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1325610000</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">70.85</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah blah"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f9d79fd86f33468d4"</span><span class="p">}]}</span><span class="w">

</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>/goals/</code><em>g</em><code>.json</code></p>

<p>Gets goal details for user <em>u</em>&#39;s goal <em>g</em> &mdash; beeminder.com/<em>u</em>/<em>g</em>.</p>
<h3 id='parameters-3'>Parameters</h3>
<ul>
<li>[<code>datapoints</code>] (boolean): Whether to send the goal&#39;s datapoints in the response. Default: <code>false</code>.</li>
</ul>
<h3 id='returns-2'>Returns</h3>
<p>A <a href="#goal">Goal</a> object, possibly without the datapoints attribute.</p>

<h2 id="getgoals">Get all goals for a user</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice/goals.json?auth_token<span class="o">=</span>abc123&amp;filter<span class="o">=</span>frontburner
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gmailzero"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Inbox Zero"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inboxer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+gmailzero.svg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+gmailzero.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight-thumb.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1347519599</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="mf">25.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1345774578</span><span class="p">,</span><span class="w">
      </span><span class="s2">"queued"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fitbit-me"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Never stop moving"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hustler"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+fitbit-me.svg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+fitbit-me.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+fitbit-thumb.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1346482799</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1349582400</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1345771188</span><span class="p">,</span><span class="w">
      </span><span class="s2">"queued"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>/goals.json</code></p>

<p>Get user <em>u</em>&#39;s list of goals.</p>
<h3 id='parameters-4'>Parameters</h3>
<p>None.</p>
<h3 id='returns-3'>Returns</h3>
<p>A list of <a href="#goal">Goal</a> objects for the user.
Goals are sorted in descending order of urgency, i.e., increasing order of time to derailment.
(There&#39;s actually a very tiny caveat to this involving the long-deprecated &quot;sort threshold&quot; parameter.
If you don&#39;t know what that is then you can ignore this parenthetical!)</p>

<h2 id="creategoal">Create a goal for a user</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X POST https://www.beeminder.com/api/v1/users/alice/goals.json <span class="se">\</span>
    -d <span class="nv">auth_token</span><span class="o">=</span>abc123 <span class="se">\</span>
    -d <span class="nv">slug</span><span class="o">=</span>exercise <span class="se">\</span>
    -d <span class="nv">title</span><span class="o">=</span>Work+Out+More <span class="se">\</span>
    -d <span class="nv">goal_type</span><span class="o">=</span>hustler <span class="se">\</span>
    -d <span class="nv">goaldate</span><span class="o">=</span>1400000000 <span class="se">\</span>
    -d <span class="nv">rate</span><span class="o">=</span>5 <span class="se">\</span>
    -d <span class="nv">goalval</span><span class="o">=</span>null
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exercise"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Work Out More"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hustler"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise.svg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise-thumb.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1447519599</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1400000000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1345774578</span><span class="p">,</span><span class="w">
    </span><span class="s2">"queued"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals.json</code></p>

<p>Create a new goal for user <em>u</em>.</p>
<h3 id='parameters-5'>Parameters</h3>
<ul>
<li><code>slug</code> (string)</li>
<li><code>title</code> (string)</li>
<li><code>goal_type</code> (string)</li>
<li><code>goaldate</code> (number or null)</li>
<li><code>goalval</code> (number or null)</li>
<li><code>rate</code> (number or null)</li>
<li><code>initval</code> (number): Initial value for today&#39;s date. Default: 0.</li>
<li>[<code>secret</code>] (boolean)</li>
<li>[<code>datapublic</code>] (boolean)</li>
<li>[<code>datasource</code>] (string): one of {&quot;api&quot;, &quot;ifttt&quot;, &quot;zapier&quot;, or <code>clientname</code>}. Default: none (i.e., &quot;manual&quot;).</li>
<li>[<code>dryrun</code>] (boolean). Pass this to test the endpoint without actually creating a goal. Defaults to false.</li>
</ul>

<p><a href="http://youtu.be/QM9Bynjh2Lk?t=4m14s">Exactly</a> two out of three of <code>goaldate</code>, <code>goalval</code>, and <code>rate</code> are required.</p>

<p>If you pass in your API client&#39;s registered name for the <code>datasource</code>, and your client has a registered <code>autofetch_callback_url</code>, we will POST to your callback when this goal wants new data, as outlined in <a href="#6-optional-autofetch-callback">Client OAuth</a>.</p>
<h3 id='returns-4'>Returns</h3>
<p>The newly created <a href="#goal">Goal</a> object.</p>

<p>One of the three fields <code>goaldate</code>, <code>goalval</code>, and <code>rate</code> will return a null value.
This indicates that the value is calculated based on the other two fields, as selected by the user.</p>

<h2 id="putgoal">Update a goal for a user</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X PUT https://www.beeminder.com/api/v1/users/alice/goals/exercise.json <span class="se">\</span>
    -d <span class="nv">auth_token</span><span class="o">=</span>abc124 <span class="se">\</span>
    -d <span class="nv">title</span><span class="o">=</span>Work+Out+Even+More <span class="se">\</span>
    -d <span class="nv">secret</span><span class="o">=</span><span class="nb">true</span>
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exercise"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Work Out Even More"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hustler"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise.svg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+exercise-thumb.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1447519599</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1400000000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1345774578</span><span class="p">,</span><span class="w">
    </span><span class="s2">"queued"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-6'>HTTP Request</h3>
<p><code>PUT /users/</code><em>u</em><code>/goals/</code><em>g</em><code>.json</code></p>

<p>Update user <em>u</em>&#39;s goal with slug <em>g</em>.
This is similar to the call to create a new goal, but the goal type (<code>goal_type</code>) cannot be changed.
To change any of {<code>goaldate</code>, <code>goalval</code>, <code>rate</code>} use <code>roadall</code>.</p>
<h3 id='parameters-6'>Parameters</h3>
<ul>
<li>[<code>slug</code>] (string)</li>
<li>[<code>title</code>] (string)</li>
<li>[<code>yaxis</code>] (string)</li>
<li>[<code>secret</code>] (boolean)</li>
<li>[<code>datapublic</code>] (boolean)</li>
<li>[<code>nomercy</code>] (boolean)</li>
<li>[<code>roadall</code>] (array of arrays like <code>[date::int, value::float, rate::float]</code> each with exactly one field null)

<ul>
<li>This must not make the goal easier between now and the akrasia horizon (unless you are an admin).</li>
<li>Use <code>roadall</code> returned by <a href="#getgoal">goal GET</a>, not <code>road</code> &mdash; the latter is missing the first and last rows (for the sake of backwards compatibility).</li>
<li>The first row must be <code>[date, value, null]</code> and gives the start of the road, same as <code>initday</code> and <code>initval</code> in <a href="#getgoal">goal GET</a>.</li>
<li>The last row can be <code>[null, value, rate]</code> but no other row can be.</li>
<li>You can also send a road with dates specified as either a daystamp or date string, e.g., &quot;20170727&quot; or &quot;2017-07-27&quot;.</li>
<li>This is a superset of <code>dial_road</code> (which changes just the last row of this roadall).</li>
<li>If you change rate units in the same call, the road will be updated first, and rate units second, so make adjustments to the road in terms of the original rate units, or make two separate calls, first updating rate units, then sending  your adjusted road.</li>
</ul></li>
<li>[<code>datasource</code>] (string): one of {&quot;api&quot;, &quot;ifttt&quot;, &quot;zapier&quot;, or <code>clientname</code>}. Default: none.

<ul>
<li>If you pass in your API client&#39;s registered name for the <code>datasource</code>, and your client has a registered <code>autofetch_callback_url</code>, we will POST to your callback when this goal wants new data, as outlined in <a href="#6-optional-autofetch-callback">Client OAuth</a>.</li>
<li>To unset the datasource, (i.e., return to manual entry) pass in the empty string <code>&quot;&quot;</code>.</li>
</ul></li>
</ul>
<h3 id='returns-5'>Returns</h3>
<p>The updated <a href="#goal">Goal</a> object.</p>

<h2 id="refresh">Force a fetch of autodata and graph refresh</h2>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice/goals/weight/refresh_graph.json?auth_token<span class="o">=</span>abc123
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="kc">true</span><span class="w">
</span></code></pre><h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/refresh_graph.json</code></p>

<p>Analagous to the refresh button on the goal page. Forces a refetch of autodata for goals with automatic data sources. Refreshes the graph image regardless.
<strong><em>Please be extremely conservative with this endpoint!</em></strong></p>
<h3 id='parameters-7'>Parameters</h3>
<p>None.</p>
<h3 id='returns-6'>Returns</h3>
<p>This is an asynchronous operation, so this endpoint simply returns <strong>true</strong> if the goal was queued and <strong>false</strong> if not.
It is up to you to watch for an updated graph image.</p>

<h2 id="dialroad">[deprecated] Update a yellow brick road</h2>
<pre class="highlight shell tab-shell"><code>  // Example request

  curl -X POST https://www.beeminder.com/api/v1/users/alice/goals/weight/dial_road.json <span class="se">\</span>
    -d <span class="nv">auth_token</span><span class="o">=</span>abc124 <span class="se">\</span>
    -d <span class="nv">rate</span><span class="o">=</span>-0.5 <span class="se">\</span>
    -d <span class="nv">goalval</span><span class="o">=</span>166 <span class="se">\</span>
    -d <span class="nv">goaldate</span><span class="o">=</span>null
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">Example</span><span class="w"> </span><span class="err">result</span><span class="w">

  </span><span class="p">{</span><span class="w"> </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weight"</span><span class="p">,</span><span class="w">                       
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Weight Loss"</span><span class="p">,</span><span class="w">                 
    </span><span class="s2">"goal_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fatloser"</span><span class="p">,</span><span class="w">                    
    </span><span class="s2">"svg_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight.svg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"graph_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"thumb_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://static.beeminder.com/alice+weight-thumb.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goaldate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">                 
    </span><span class="s2">"goalval"</span><span class="p">:</span><span class="w"> </span><span class="mi">166</span><span class="p">,</span><span class="w">                         
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">,</span><span class="w">                           
    </span><span class="s2">"losedate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1358524800</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/dial_road.json</code></p>

<aside class="notice">
Note: the dial_road endpoint is deprecated in favor of
<a href="#putgoal" title="on the goal update endpoint">roadall</a> which, despite its highly confusing state, is the future.
</aside>

<p>Change the slope of the yellow brick road (starting after the one-week
<a href="http://blog.beeminder.com/dial">Akrasia Horizon</a>)
for beeminder.com/<em>u</em>/<em>g</em>.</p>
<h3 id='parameters-8'>Parameters</h3>
<ul>
<li><code>rate</code> (number or null)</li>
<li><code>goaldate</code> (number or null)</li>
<li><code>goalval</code> (number or null)</li>
</ul>

<p>Exactly two of <code>goaldate</code>, <code>goalval</code>, and <code>rate</code> should be specified &mdash; setting two implies the third.</p>
<h3 id='returns-7'>Returns</h3>
<p>The updated <a href="#goal">Goal</a> object.</p>

<h2 id="shortcircuit">Short circuit a goal's pledge</h2>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/shortcircuit.json</code></p>

<p>Increase the goal&#39;s pledge level and <strong>charge the user the amount of the current pledge</strong>.</p>
<h3 id='parameters-9'>Parameters</h3>
<p>None</p>
<h3 id='returns-8'>Returns</h3>
<p>The updated <a href="#goal">Goal</a> object.</p>

<h2 id="stepdown">Step down a goal's pledge</h2>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/stepdown.json</code></p>

<p>Decrease the goal&#39;s pledge level <strong>subject to the akrasia horizon</strong>, i.e., not immediately.
After a successful request the goal will have a countdown to when it will revert to the lower pledge level.</p>
<h3 id='parameters-10'>Parameters</h3>
<p>None</p>
<h3 id='returns-9'>Returns</h3>
<p>The updated <a href="#goal">Goal</a> object.</p>

<h2 id="cancelstepdown">Cancel a scheduled step down</h2>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/cancel_stepdown.json</code></p>

<p>Cancel a pending stepdown of a goal&#39;s pledge.
The pledge will remain at the current amount.</p>
<h3 id='parameters-11'>Parameters</h3>
<p>None</p>
<h3 id='returns-10'>Returns</h3>
<p>The updated <a href="#goal">Goal</a> object.</p>

<p><a href="#">Back to top</a></p>

<h1 id="datapoint">Datapoint Resource</h1>

<p>A Datapoint consists of a timestamp and a value, an optional comment, and meta information.
A Datapoint belongs to a <a href="#goal">Goal</a>, which has many Datapoints.</p>
<h3 id='attributes-3'>Attributes</h3>
<ul>
<li><code>id</code> (string): A unique ID, used to identify a datapoint when deleting or editing it.</li>
<li><code>timestamp</code> (number): The <a href="http://en.wikipedia.org/wiki/Unix_time">unix time</a> (in seconds) of the datapoint.</li>
<li><code>daystamp</code> (string): The date of the datapoint (e.g., &quot;20150831&quot;). Sometimes timestamps are surprising due to goal deadlines, so if you&#39;re looking at Beeminder data, you&#39;re probably interested in the daystamp.</li>
<li><code>value</code> (number): The value, e.g., how much you weighed on the day indicated by the timestamp.</li>
<li><code>comment</code> (string): An optional comment about the datapoint.</li>
<li><code>updated_at</code> (number): The unix time that this datapoint was entered or last updated.</li>
<li><code>requestid</code> (string): If a datapoint was created via the API and this parameter was included, it will be echoed back.</li>
</ul>

<h2 id="dataall">Get all the datapoints</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl https://www.beeminder.com/api/v1/users/alice/goals/weight/datapoints.json?auth_token<span class="o">=</span>abc123
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="mi">1234567890</span><span class="p">,</span><span class="w"> </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="s2">"20090213"</span><span class="p">,</span><span class="w"> </span><span class="s2">"value"</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="s2">"comment"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="s2">"requestid"</span><span class="p">:</span><span class="s2">"a"</span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="mi">1234567891</span><span class="p">,</span><span class="w"> </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="s2">"20090214"</span><span class="p">,</span><span class="w"> </span><span class="s2">"value"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s2">"comment"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="s2">"requestid"</span><span class="p">:</span><span class="s2">"b"</span><span class="p">}]</span><span class="w">
</span></code></pre><h3 id='http-request-12'>HTTP Request</h3>
<p><code>GET /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/datapoints.json</code></p>

<p>Get the list of datapoints for user <em>u</em>&#39;s goal <em>g</em> &mdash; beeminder.com/<em>u</em>/<em>g</em>.</p>
<h3 id='parameters-12'>Parameters</h3>
<ul>
<li>[<code>sort</code>] (string): Which attribute to sort on. Defaults to <code>id</code> if none given. </li>
<li>[<code>count</code>] (integer): Limit results to count number of datapoints. Defaults to all datapoints if parameter is missing. </li>
<li>[<code>page</code>] (integer): Used to paginate results. </li>
<li>[<code>per</code>] (integer): Number of results per page. Default 25. Ignored without page parameter. </li>
</ul>
<h3 id='returns-11'>Returns</h3>
<p>The list of <a href="#datapoint">Datapoint</a> objects.</p>

<h2 id="postdata">Create a datapoint</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X POST https://www.beeminder.com/api/v1/users/alice/goals/weight/datapoints.json
    -d <span class="nv">auth_token</span><span class="o">=</span>abc123 <span class="se">\</span>
    -d <span class="nv">timestamp</span><span class="o">=</span>1325523600 <span class="se">\</span>
    -d <span class="nv">value</span><span class="o">=</span>130.1 <span class="se">\</span>
    -d <span class="nv">comment</span><span class="o">=</span>sweat+a+lot+today
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1325523600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20120102"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">130.1</span><span class="p">,</span><span class="w">         
    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sweat a lot today"</span><span class="p">,</span><span class="w">   
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4f9dd9fd86f22478d3000008"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"requestid"</span><span class="p">:</span><span class="s2">"abcd182475925"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/datapoints.json</code></p>

<p>Add a new datapoint to user <em>u</em>&#39;s goal <em>g</em> &mdash; beeminder.com/<em>u</em>/<em>g</em>.</p>
<h3 id='parameters-13'>Parameters</h3>
<ul>
<li><code>value</code> (number)<br></li>
<li>[<code>timestamp</code>] (number). Defaults to &quot;now&quot; if none is passed in, or the existing timestamp if the datapoint is being updated rather than created (see <code>requestid</code> below).</li>
<li>[<code>daystamp</code>] (string). Optionally you can include daystamp instead of the timestamp. If both are included, timestamp takes precedence.</li>
<li>[<code>comment</code>] (string)</li>
<li>[<code>requestid</code>] (string):
String to uniquely identify this datapoint (scoped to this goal. The same <code>requestid</code> can be used for different goals without being considered a duplicate).
Clients can use this to verify that Beeminder received a datapoint (important for clients with spotty connectivity).
Using requestids also means clients can safely resend datapoints without accidentally creating duplicates.
If <code>requestid</code> is included and the datapoint is identical to the existing datapoint with that requestid then the datapoint will be ignored (the API will return &quot;duplicate datapoint&quot;).
If <code>requestid</code> is included and the datapoint differs from the existing one with the same requestid then the datapoint will be updated.
If no datapoint with the requestid exists then the datapoint is simply created.
In other words, this is an upsert endpoint and requestid is an idempotency key.
NB: If you&#39;re sending multiple create datapoint requests in rapid succession (within say &lt; 100-500ms of each other) using this endpoint, and sending the same requestid, it&#39;s not guaranteed that the datapoints won&#39;t be duplicated, as you might expect.</li>
</ul>
<h3 id='returns-12'>Returns</h3>
<p>The updated <a href="#datapoint">Datapoint</a> object.</p>

<h2 id="postdatas">Create multiple datapoints</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X POST https://www.beeminder.com/api/v1/users/alice/goals/weight/datapoints/create_all.json
    -d <span class="nv">auth_token</span><span class="o">=</span>abc123 <span class="se">\</span>
    -d <span class="nv">datapoints</span><span class="o">=[{</span><span class="s2">"timestamp"</span>:1343577600,<span class="s2">"value"</span>:220.6,<span class="s2">"comment"</span>:<span class="s2">"blah+blah"</span>, <span class="s2">"requestid"</span>:<span class="s2">"abcd182475929"</span><span class="o">}</span>, <span class="o">{</span><span class="s2">"timestamp"</span>:1343491200,<span class="s2">"value"</span>:220.7, <span class="s2">"requestid"</span>:<span class="s2">"abcd182475930"</span><span class="o">}]</span>
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9adad11576ad00000f"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577600</span><span class="p">,</span><span class="w">
      </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20120729"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">220.6</span><span class="p">,</span><span class="w">
      </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah blah"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577600</span><span class="p">,</span><span class="w">
      </span><span class="s2">"requestid"</span><span class="p">:</span><span class="s2">"abcd182475923"</span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9bdad11576ad000010"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343491200</span><span class="p">,</span><span class="w">
      </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20120728"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">220.7</span><span class="p">,</span><span class="w">
      </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343491200</span><span class="p">,</span><span class="w">
      </span><span class="s2">"requestid"</span><span class="p">:</span><span class="s2">"abcd182475923"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='http-request-14'>HTTP Request</h3>
<p><code>POST /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/datapoints/create_all.json</code></p>

<p>Create multiple new datapoints for beeminder.com/<em>u</em>/<em>g</em>.</p>
<h3 id='parameters-14'>Parameters</h3>
<ul>
<li><code>datapoints</code> (array of Datapoints):
Each must include <code>timestamp</code>, <code>value</code>, and <code>comment</code>, with <code>requestid</code> optional.</li>
</ul>
<h3 id='returns-13'>Returns</h3>
<p>A list of successfully created <a href="#datapoint">Datapoints</a>. 
Or, in the case of any errors, you will receive an object with two lists, <code>successes</code>, and <code>errors</code>.</p>

<h2 id="putdata">Update a datapoint</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X PUT https://www.beeminder.com/api/v1/users/alice/goals/weight/datapoints/5016fa9adad11576ad00000f.json <span class="se">\</span>
    -d <span class="nv">auth_token</span><span class="o">=</span>abc123 <span class="se">\</span>
    -d <span class="nv">comment</span><span class="o">=</span>a+real+comment
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9adad11576ad00000f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">220.6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a real comment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20120729"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577609</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-15'>HTTP Request</h3>
<p><code>PUT /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/datapoints/</code><em>id</em><code>.json</code></p>

<p>Update the datapoint with ID <em>id</em> for user <em>u</em>&#39;s goal <em>g</em> (beeminder.com/<em>u</em>/<em>g</em>).</p>
<h3 id='parameters-15'>Parameters</h3>
<ul>
<li>[<code>timestamp</code>] (number)</li>
<li>[<code>value</code>] (number)</li>
<li>[<code>comment</code>] (string)</li>
</ul>
<h3 id='returns-14'>Returns</h3>
<p>The updated <a href="#datapoint">Datapoint</a> object.</p>

<h2 id="deletedata">Delete a datapoint</h2>

<blockquote>
<p>Examples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X DELETE https://www.beeminder.com/api/v1/users/alice/goals/weight/datapoints/5016fa9adad11576ad00000f.json?auth_token<span class="o">=</span>abc123
</code></pre><pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9adad11576ad00000f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">220.6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a real comment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"daystamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20120729"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1343577609</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-16'>HTTP Request</h3>
<p><code>DELETE /users/</code><em>u</em><code>/goals/</code><em>g</em><code>/datapoints/</code><em>id</em><code>.json</code></p>

<p>Delete the datapoint with ID <em>id</em> for user <em>u</em>&#39;s goal <em>g</em> (beeminder.com/<em>u</em>/<em>g</em>).</p>
<h3 id='parameters-16'>Parameters</h3>
<p>None.</p>
<h3 id='returns-15'>Returns</h3>
<p>The deleted <a href="#datapoint">Datapoint</a> object.</p>

<p><a href="#">Back to top</a></p>

<h1 id="charge">Charge Resource</h1>

<p>Beeminder provides an endpoint to charge an arbitrary amount to a Beeminder user. The user is inferred from the <code>access_token</code> or <code>auth_token</code> provided.
A <code>Charge</code> object has the following attributes:</p>
<h3 id='attributes-4'>Attributes</h3>
<ul>
<li><code>amount</code> (number): The amount to charge the user, in US dollars.</li>
<li><code>note</code> (string): An explanation of why the charge was made.</li>
<li><code>username</code> (string): The Beeminder username of the user being charged.</li>
</ul>

<h2 id="postcharge">Create a charge</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X POST <span class="s1">'https://www.beeminder.com/api/v1/charges.json'</span> <span class="se">\</span>
    -d <span class="nv">auth_token</span><span class="o">=</span>abc123 <span class="se">\</span>
    -d <span class="nv">amount</span><span class="o">=</span>10 <span class="se">\</span>
    -d <span class="nv">note</span><span class="o">=</span>I%27m+not+worthy%3B+charge+myself+%2410 <span class="se">\</span>
</code></pre>
<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9adad11576ad00000f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I'm not worthy; charge myself $10"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alice"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-17'>HTTP request</h3>
<p><code>POST /charges</code></p>

<p>Create a charge of a given amount and optionally add a note.</p>
<h3 id='parameters-17'>Parameters</h3>
<ul>
<li><code>amount</code> (number)</li>
<li><code>note</code> (string)</li>
<li>[<code>dryrun</code>] (string): If passed, the Charge is not actually created, but the JSON for it is returned as if it were. Default: false.</li>
</ul>
<h3 id='returns-16'>Returns</h3>
<p>The Charge object, or an object with the error message(s) if the request was not successful.</p>

<p><a href="#">Back to top</a></p>

<h1 id="webhooks">Webhooks</h1>

<blockquote>
<p>Example of POSTed data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="s2">"goal"</span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5016fa9adad11576ad00000f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">  
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can configure Beeminder to remind you about goals that are about to derail via webhook, either on the individual goal settings page or on your reminder settings page.</p>

<p>Beeminder will remind you via POST request to the URL you specify with a JSON body with all the attributes specified in the description of the
<a href="#goal">Goal Resource</a>.</p>
<h1 id='errors'>Errors</h1>
<p>The Beeminder API uses the following error codes.
Check your HTTP response code, but also we will usually pass back a JSON object with a key <code>errors</code> that will hopefully illuminate what went wrong.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &mdash; Wrong / missing key. (Check your parameter name?)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &mdash; Couldn&#39;t find that resource, or path requested.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &mdash; Check the format of your params?</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &mdash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &mdash; We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
